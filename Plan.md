# Schedule
## Goals
1. ~~Навчитися грамотно працювати з Git, Bitbacket (я найшов нормальну тактику роботи з гітом потім її скину)~~
2. Попрактикувати SQLite room
3. Навчитися застосовувати fragments
4. ~~Навчитися застосовувати MVP and Clear Architecture~~
5. Навчитися писати БАГАТО коментарів англійською мовою
6. ~~Тестити проект перед push-ом в master(виправити конфлікти, попробувати чи нормально змержилося)~~
7. Основна ціль - навчитися чогось нового тому якщо ви використовуєте якусь цікаву ідею, то ви маєте допомогти розібратися іншим членам команди


## Мета

Cтворити програму яка буде допомагати виконувати більше справ за день 


## Prototypes

### Prototype I
1. ~~Додати на головну сцену[activity_main.xml] toolbar, float action bar(плюс)~~
2. ~~При натисненні на плюс переходити на активність[add_note.xml] створення замітки де (поки що) буде edit text для name і кнопка ОК~~
3. ~~Реалізувати додавання елементів до БД(БД має бути з полями id, name(String), date(format int[]), frequency(не повторювати, повторювати кожний день, кожний тиждень...)~~
4. ~~Реалізувати виведеня з БД заміток на головну сторінку~~
5. ~~Реалізувати видалення з ДБ заміток~~
5.1. ~~Переписати проект на MVP~~
5.2. ~~Переписати DB room якщо потібно~~
6. Протестити на баги, зробити папку apk поряд з проектом і запушити на гілку release 

### Prototype II
1. ~~На add_note.xml додати можливість введення дати(додати switch "Reminder me" який дозволить введення дати)~~ 
1.1. ~~Виводити дату у TextView на add_note.xml для тесту~~
1.2. ~~Виводити час у TextView для тесту~~
2. ~~Виводити повну дату під назвою замітки~~
3. Виводити на [activity_main.xml] спершу замітки з датою, а потім без дати
4. ~~Зробити нотифікації залежно від дати~~
5. ~~Винести datePicker в окреме вікно~~
6. ~~Реалізувати updateDB замість deleteFromDb, а потім insertToDb цієї самої замітки~~

### Prototype III
1. ~~Додати введення frequency(не повторювати, повторювати кожний день) і для debug виводити її на головній сторінці~~
2. Додавати кожний день замітки до БД з частотою на кожний день
2.1. ~~Додавати нотифікації залежно від дати~~ 
2.2. Коли юзер натискає на нотифікацію його має перекидувати на головну сцену
2.3. Додати звук(вібрацію, світло) до замітки
3. ~~Переписати програму на RxJava і видалити Callback Hell~~

### Prototype IV
1.0. ~~Переписати код під одну активність(MainActivity) і 2 фрагменти(MainFragment, UpdateNote)
1.1. Зберігати сцену через setRetainInstance(true) або onSavedInstanceState(Bundle)
2. ~~Виправити баг коли користувач натиснув remind me але не ввів дату(нотифікація має бути на 1 хвилину пізніше ніж поточний час)~~
3. ~~Виводити повідомлення коли дата нагадування менша за поточну~~
4. ~~Якщо користувач ввів дату яка менша за поточну замітка, кнопка ОК не має бути доступна~~
5. ~~Для кожного користувача має бути свій формат залежно від його налаштувань~~


### Prototype V
1. ~~Додати до item.xml checkbox~~
2. ~~Додати до DB стовпчик done, який показує чи зробленна замітка (залежно від checkbox)~~
3. Якщо done == true то нотифікація не має приходити
4. На наступний день вчорашні замітки мають видалятися(якщо done == true), а ті які не виконанні мають залишатися на наступний
5. Перемістити роботу з БД в AddNoteActivity

### Preparation for release I
1. ~~Виправити баг з updateNote
2. ~~Відновити перехід на Settings
3. Коли немає заміток виводити якусь картинку
4. Поміняти колір тулбара на білий
5. ~~Записувати cbDone до БД

## Bugs
1. Коли переходиш на activity_main.xml спочатку показується старі данні з ДБ а потім вони швидко обновляються на нові
2. ~~Програма крашиться коли не вводиш дату~~
3. Коли ти вводиш дату для замітки, а потім редагуєш замітку і забираєш дату, то нотифікація все одно приходить
4. Не робить світло, вібрація і звук коли приходить замітка(звук був при тестуванні на емуляторі з API 28)
5. ~~Коли переходиш на редагування замітки і нічого не змінюючи натискаєш ОК, то замітка зберігається з іншою поточною датою, хоча користувач дату не змінював на поточну.~~
6. ~~Баг з підтримкою 12 годинного форматy. Не висвідчуються замітки~~


## Features:
1.0 ~~Вводити дату коли switch активний і видаляти ET для дати коли switch не активний~~
1.1 Коли користувач натискає на checkbox поряд із заміткою, замітка має закреслитися і в DB має змінитися властивість done на true
2. ~~Нотифікації в даті початку завдання~~
3. Коли на головній сторінці немає справ виводити якусь картинку
4. Додати кнопку undo на snapbar який появляється коли видаляєш замітку
5. Оптимізувати показ дати на активності add_note: щоб для кожного користувача показувалася дата і час залежно від його налаштувань
6. Додати властивість color до замітки
7. Можливість переглядання справ які людина має зробити за сьогодні, завтра, ... 
9. Додати можливість користувачу редагувати Prototype V #4

## Design
2. ~~Поміняти картинку на activity_main на білий плюс.~~
2.1. Винести все в res/values/colors.xml для того щоб потім можна було зручніше міняти кольорову гамму
2.2. ~~Поміняти colorAccent~~
3. Винести кнопку okey на .AddNoteActivity на fab 
4. Виправити баг коли натискаєш ОК на [add_note.xml] і переходиш на [activity_main.xml] сцена перший раз малюється криво через клавіатуру яка ще не пропала
4.1 Коли переходиш на активність, спочатку малюються старі данні, а потім вони швидко змінюються на нові
5. Перенести кнопку видалення на тулбар, тому що коли користувач натискає створити нову замітку він може випадково натиснути 2 раза і випадково натисне на кнопку видалення
6. Зробити показ date/time pickers, на [add_note.xml] через EditText, а не через TextView
7. Поміняти колір тексту в ActionBar
8. Прокручувати назву замітки в нотифікації, і відображати повністю опис замітки в нотифікації
9. Коли переходиш на AddNoteActivity через fab кнопка видалити замітку не має відображатися

## Optimisation
1. Зберігати дату в нормальному форматі

## Architecture
1. ~~Contract. Во первых, он один, а нужно их создавать под каждый экран отдельно. И зачем он тебе нужен, View Interface действительно нужен для связи между Activity/Fragment и Presenter~~
2. ~~Model = Data + Interactor + Repository + System. В Repo происходит вся грязная работа - обработка данных  из Data(HTTP-requests, DB, Prefs) к нужному состоянию/виду, если ты используешь RxJava, то, в основном, ты будешь возвращать реактивные типы(Observable, Flowable, Single, Completable, Maybe ...). Interactor берет данные из Repository и служит инкапсуляцией для них, он может брать несколько Repo, поэтому в Presenter мы сможем вызвать только те, методы то нам нужны, а не все(к которым мы не должны иметь доступ в этом случае).~~
2.1. ~~Data~~
2.2. ~~Repository~~
2.3. ~~Interactor~~
2.4. ~~System~~
3. ~~Интерфейс View должен быть "глупый", поэтому в нём должны быть только void методы и не должно быть методов жизненного цикла Fragment/Activity таким образом ты усложняешь самому себе жизнь, если вдруг сложно следить за этим, то есть библиотека по MVP архитектуре - Moxy(https://github.com/Arello-Mobile/Moxy), она будет тебе бить по рукам, если ты нарушишь это правило~~
4. ~~RxJava избавляет от Callback Hell, но у тебя появляется Сallback там где можно просто вызывать метод из View и те же Callback по Activity/Lifecycle, которые не нужны~~
5. ~~Следующее находится в AddNotePresenter, а должно находиться в других слоях/сущностях:~~
5.1. ~~Intent и FragmentTransaction, в основном, переходы с одного экрана на другой - это будет во view container(Activity/Fragment) или в Navigator(используется для сложных схем навигации, как сейчас на Youtube, потому что там есть BottomNavigationView), запуск Service/IntentService/Job/Notification - это относится к слою model, папке system или просто к Repo~~
6. ~~В Utils-классах лучше возвращай пустое значение(пустой String, List и т.д.), чем null~~
7. ~~И NoteRepository место в папке model~~

## Structure mainRepository
master - там зберігається остання робоча версія проекту
develop - робоча вітка, вітка для виправлення багів
*release - там зберігається остання готова до використання версія програми*

## How use it
---begin---
echo "# empty_repository" >> README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://bitbucket.org/programmers-of-android/schedule.git
git push -u origin master
-----------

git checkout master     // перехід на master для того щоб скачати оновлення
git pull                // скачування оновлень
git checkout develop    // перехід на develop для merge з master
git merge master        // отримання оновлень на вітку develop


----робота на develop branch, making commits----

git checkout master     // перехід на master для того щоб скачати оновлення
git pull                // скачування оновлень
git checkout develop    // перехід на develop для merge з master
git merge master        // отримання оновлень на вітку develop

---виправлення конфліктів, тестування чи merge вдався---

git checkout master     // перехід на master щоб загрузити свої доробки
git merge develop       // об'єднуємо наші оновлення
git push                // пушимо на віддаленний репозиторій


git checkout develop    // !!! для того щоб продовжити роботу на вітці develop
